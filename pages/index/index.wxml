<!-- pages/index/index.wxml -->
<view class="container" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd">
  <!-- æ— å›¢é˜Ÿæç¤º -->
  <view class="no-team" wx:if="{{!hasTeam}}">
    <text>å¦‚éœ€è¦å¤šäººåŒæ­¥ï¼Œè¯·åœ¨â€œå›¢é˜Ÿâ€ä¸­æ“ä½œã€‚</text>
  </view>
  <!-- å¤´éƒ¨ç»Ÿè®¡åŒºåŸŸ -->
  <view class="header-card">
    <view class="stats-row">
      <view class="stat-item" bindtap="onFilterChange" data-type="all">
        <text class="stat-number">{{totalCount}}</text>
        <text class="stat-label">å…¨éƒ¨</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item stat-expired" bindtap="onFilterChange" data-type="expired">
        <text class="stat-number">{{expiredCount}}</text>
        <text class="stat-label">å·²è¿‡æœŸ</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item stat-warning" bindtap="onFilterChange" data-type="warning">
        <text class="stat-number">{{warningCount}}</text>
        <text class="stat-label">å³å°†è¿‡æœŸ</text>
      </view>
    </view>
    <view class="reminder-tip">
      ä¸´æœŸæé†’ï¼šåˆ°æœŸå‰{{reminderDays}}å¤©æç¤º
    </view>
  </view>

  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="filter-tabs">
    <view class="filter-tab {{filterType === 'all' ? 'active' : ''}}" bindtap="onFilterChange" data-type="all">
      å…¨éƒ¨
    </view>
    <view class="filter-tab {{filterType === 'expired' ? 'active' : ''}}" bindtap="onFilterChange" data-type="expired">
      å·²è¿‡æœŸ
    </view>
    <view class="filter-tab {{filterType === 'warning' ? 'active' : ''}}" bindtap="onFilterChange" data-type="warning">
      å³å°†è¿‡æœŸ
    </view>
    <view class="filter-tab {{filterType === 'normal' ? 'active' : ''}}" bindtap="onFilterChange" data-type="normal">
      æ­£å¸¸
    </view>
  </view>

  <!-- ç‰©å“åˆ—è¡¨ -->
  <view class="item-list" wx:if="{{!isEmpty}}">
    <view 
      class="item-card" 
      wx:for="{{items}}" 
      wx:key="_id"
      bindtap="editItem"
      bindlongpress="showActionSheet"
      data-id="{{item._id || item.id}}"
    >
      <view class="item-left">
        <image 
          class="item-product-image" 
          src="{{item.productImage}}" 
          mode="aspectFill"
          wx:if="{{item.productImage}}"
        />
        <view class="item-content">
          <view class="item-category-badge" style="background-color: {{item.statusBgColor}}; color: {{item.statusColor}};">
            {{item.category || 'æœªåˆ†ç±»'}}
          </view>
          <view class="item-name">{{item.name}}</view>
          <view class="item-date">
            <text class="date-icon">ğŸ“…</text>
          <text>è¿‡æœŸï¼š{{item.expireDisplay || item.expireDate || 'æ— æ—¥æœŸ'}}</text>
          </view>
        </view>
      </view>
      <view class="item-right">
        <view class="days-remaining" style="color: {{item.statusColor}};">
          <text wx:if="{{item.daysRemaining < 0}}">å·²è¿‡æœŸ</text>
          <text wx:elif="{{item.daysRemaining === 0}}">ä»Šå¤©</text>
          <text wx:else>{{item.daysRemaining}}å¤©</text>
        </view>
        <view class="status-tag" style="background-color: {{item.statusBgColor}}; color: {{item.statusColor}};">
          {{item.statusText}}
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{isEmpty}}">
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">æš‚æ— ç‰©å“è®°å½•</text>
    <text class="empty-hint">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ·»åŠ ç¬¬ä¸€ä¸ªç‰©å“</text>
  </view>

</view>
