# 物品过期提醒 - 微信小程序

一个简单实用的微信小程序，用于管理和追踪物品的过期时间，并在临近过期时提供醒目提醒。

## 功能特点

- **📷 扫码识别**：扫描条形码自动识别商品信息
- **🔄 本地历史匹配**：扫过的商品自动记忆，无需重复调用API（NEW！）
- **🖼️ 商品图片展示**：自动显示商品图片，一目了然
- **添加物品**：记录物品名称、分类和过期日期
- **物品列表**：清晰展示所有物品及其过期状态
- **智能提醒**：自动标识即将过期和已过期的物品
  - 🔴 已过期：红色显示
  - 🟠 即将过期(3天内)：橙色显示
  - 🟡 注意(7天内)：黄色显示
  - 🟢 正常：绿色显示
- **快捷操作**：支持快速选择分类和日期
- **编辑删除**：轻松管理已添加的物品
- **数据持久化**：所有数据保存在本地

## 项目结构

```
display_date/
├── app.js                 # 小程序入口文件
├── app.json               # 小程序全局配置
├── app.wxss               # 小程序全局样式
├── project.config.json    # 项目配置文件
├── sitemap.json           # 搜索配置
├── README.md              # 项目说明文档
├── pages/                 # 页面目录
│   ├── index/             # 首页（物品列表）
│   │   ├── index.js
│   │   ├── index.json
│   │   ├── index.wxml
│   │   └── index.wxss
│   └── add/               # 添加/编辑物品页面
│       ├── add.js
│       ├── add.json
│       ├── add.wxml
│       └── add.wxss
└── utils/                 # 工具函数
    └── util.js
```

## 快速开始

### 1. 安装微信开发者工具

前往 [微信开发者工具下载页面](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html) 下载并安装。

### 2. 导入项目

1. 打开微信开发者工具
2. 选择"导入项目"
3. 选择本项目文件夹
4. 填写你的 AppID（可使用测试号）
5. 点击"导入"

### 3. 运行预览

- 点击工具栏的"编译"按钮即可预览
- 点击"预览"可在手机上测试

## 使用说明

### 扫码添加物品（推荐）

1. 点击"📷 扫条形码识别"按钮
2. 扫描商品条形码
3. **智能识别流程**：
   - 🔍 首先查询本地历史记录（秒速匹配，无需API）
   - 🌐 本地无记录时才调用API识别
   - 💾 自动保存到本地历史，下次秒速识别
4. 显示商品图片和名称
5. 选择过期日期
6. 点击"添加物品"保存

**省钱小技巧**：同样的商品只需扫码识别一次，后续都从本地匹配，节省API调用次数！

### 手动添加物品

1. 点击首页底部的"添加物品"按钮
2. 输入物品名称（必填）
3. 选择或输入分类（可选）
4. 选择过期日期（必填）
   - 可以手动选择日期
   - 也可以使用快捷按钮（3天后、7天后、30天后等）
5. 添加备注信息（可选）
6. 点击"添加物品"保存

### 查看物品

- 首页显示所有物品列表
- 下拉可刷新列表
- 物品按过期时间自动排序（最先过期的在前面）
- 不同状态的物品用不同颜色标识

### 筛选物品

点击顶部的筛选标签可以筛选：
- **全部**：显示所有物品
- **已过期**：只显示已过期的物品
- **即将过期**：显示7天内过期的物品
- **正常**：显示7天后才过期的物品

### 编辑物品

1. 点击列表中的物品进入编辑页面
2. 修改需要更改的信息
3. 点击"保存修改"

### 删除物品

方式一：在列表页直接点击物品右侧的删除图标
方式二：进入编辑页面，点击底部的"删除物品"按钮
方式三：长按物品，在弹出菜单中选择"删除"

## 技术栈

- **框架**：微信小程序原生框架
- **语言**：JavaScript / WXML / WXSS
- **数据存储**：wx.setStorageSync（本地存储）
- **扫码API**：TianAPI条码查询接口

## 数据格式

物品数据存储在本地，格式如下：

```json
{
  "id": "item_1234567890_abc123",
  "name": "牛奶",
  "category": "食品",
  "expireDate": "2025-12-10",
  "note": "放在冰箱第二层",
  "barcode": "6901028075831",
  "addDate": "2025-12-04"
}
```

## 更新日志

### v1.2.0 (2025-12-04)
- 🚀 新增本地历史匹配功能（重要更新！）
- 🖼️ 支持商品图片展示
- 💾 智能记忆：扫过的商品自动保存，下次秒速识别
- 💰 大幅节省API调用次数
- 🎨 优化商品预览界面

### v1.1.0 (2025-12-04)
- ✨ 新增扫码识别商品功能
- ✨ 支持条形码自动识别商品名称
- 🎨 优化添加页面UI设计

### v1.0.0 (2025-12-04)
- 初始版本发布
- 实现添加、编辑、删除物品功能
- 实现过期状态智能提醒
- 实现物品筛选功能
- 美化界面设计

## 注意事项

1. **AppID 配置**：在 `project.config.json` 中将 `appid` 替换为你自己的 AppID
2. **扫码API配置**：如需使用扫码识别功能，请配置TianAPI密钥（见下方说明）
3. **数据备份**：数据存储在本地，卸载小程序会清除数据
4. **日期限制**：过期日期只能选择今天及之后的日期

## 🔑 扫码功能配置（可选）

如需使用扫码自动识别商品功能，请按以下步骤配置：

### 1. 注册TianAPI账号

访问 [TianAPI官网](https://www.tianapi.com/) 注册账号

**福利**：免费注册送100次调用，之后仅需0.01元/次

### 2. 获取API Key

1. 登录 TianAPI
2. 进入个人中心
3. 复制你的 API Key

### 3. 配置到小程序

打开 `pages/add/add.js` 文件，找到第 19 行左右：

```javascript
apiKey: 'YOUR_TIANAPI_KEY' // 请在 https://www.tianapi.com 注册获取
```

将 `YOUR_TIANAPI_KEY` 替换为你的真实 API Key：

```javascript
apiKey: '你的真实API_Key'
```

### 4. 完成！

现在可以使用扫码识别功能了：
- 点击"📷 扫条形码识别"按钮
- 扫描商品条形码
- 自动识别并填充商品信息
- 如果识别不到，可以手动输入

**注意事项**：
- 免费账号有100次调用限制
- 超出后需要充值或按次付费
- 部分商品可能无法识别（数据库未收录）
- 条码号会被保存，方便后续查询

## 常见问题

### Q: 如何获取 AppID？

A: 登录 [微信公众平台](https://mp.weixin.qq.com/)，在"开发" -> "开发管理" -> "开发设置"中查看。

### Q: 可以使用测试号吗？

A: 可以，在导入项目时选择"使用测试号"即可。

### Q: 扫码识别不到商品怎么办？

A: 部分商品可能数据库未收录，请手动输入商品名称。条码号会被保存。

### Q: 数据会同步到云端吗？

A: 当前版本数据只存储在本地，不会同步到云端。

### Q: 不配置API可以使用吗？

A: 可以！不配置API只是无法使用扫码识别功能，其他功能完全正常使用。

### Q: 本地历史匹配如何工作？

A: 
- 第一次扫码：调用API识别，自动保存到本地
- 后续扫码：直接从本地匹配，秒速识别，不消耗API次数
- 即使手动输入商品名称，也会保存到本地历史

### Q: 如何清空本地历史记录？

A: 在微信小程序"设置"中选择"清除缓存"即可。

## 后续计划

- [x] 添加扫码快速添加功能 ✅
- [x] 本地历史匹配功能 ✅
- [x] 商品图片展示 ✅
- [ ] 添加分类管理功能
- [ ] 添加提醒通知功能（订阅消息）
- [ ] 支持云端数据同步
- [ ] 添加数据导出功能
- [ ] 添加图片识别生产日期功能
- [ ] 支持多个免费API切换
- [ ] 历史记录管理界面

## 反馈与建议

如有任何问题或建议，欢迎提出 Issue 或 Pull Request。

## 许可证

MIT License

---

**祝你使用愉快！永远不再错过物品的保质期！** 🎉
