<view class="container">
  <view class="profile-card card">
    <view class="avatar">🔔</view>
    <view class="profile-info">
      <view class="title">我的</view>
      <view class="subtitle">设置消息推送与临期提醒</view>
    </view>
  </view>

  <view class="card setting-card">
    <view class="setting-header">
      <view class="setting-title">临期提醒天数</view>
      <view class="setting-value">提前{{reminderDays}}天</view>
    </view>
    <slider 
      min="{{minDays}}" 
      max="{{maxDays}}" 
      step="1" 
      value="{{reminderDays}}" 
      bindchange="onReminderChange"
      activeColor="#4A90E2"
      backgroundColor="#E8F4FD"
      block-color="#357ABD"
      block-size="26"
      show-value
    />
    <view class="setting-tip">到期前{{reminderDays}}天会触发提醒</view>
    <view class="btn btn-primary save-btn" bindtap="saveSettings">保存提醒设置</view>
  </view>

  <view class="card info-card">
    <view class="info-title">推送说明</view>
    <view class="info-text">目前采用本地提醒（打开小程序时检测并提示）。如需订阅消息推送，需在微信后台配置模板并获取用户授权。</view>
    <view class="info-text">您仍可在此处设置临期阈值，后续接入推送时可直接复用。</view>
    <view class="btn btn-success test-btn" bindtap="previewReminder">预览提醒效果</view>
    <view class="btn btn-primary subscribe-btn" bindtap="requestSubscribe">获取订阅消息授权</view>
    <view class="btn btn-primary send-btn" bindtap="requestSubscribeAndSend">测试推送</view>
  </view>
</view>

